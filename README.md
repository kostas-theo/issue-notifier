# issue-notifier

Provides a Github action for tracking Github issues in the client repo and optionally notifying by email when an issue hits a specified number of upvotes.

Creates a table on the master branch `README` page with a list of currently open issues ordered by upvotes. In order to ensure the table stays up to date, use the `on.schedule` workflow event trigger syntax suggested below which will automatically check for changes every hour and commit changes only.

The SMTP password should be added to Github secrets for your repo. Also note that the GITHUB_TOKEN with relevant permissions is automatically generated by Github actions and can be referenced as shown below.

## Example Workflow

```yaml
name: issue-voting

on:
  issues:
    types: [opened, closed, reopened, deleted, labeled, edited]
  schedule:
    - cron:  '0 * * * *'
    
jobs:
  actions_pipeline:
    runs-on: ubuntu-latest
    steps:
      - name: issue-notifier-step
        uses: kostas-theo/issue-notifier@v1.0.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          notify_enabled: true
          notify_upvotes: 10
          notify_address: "committee@yourdomain.com"
          notify_item_name: "vote"
          smtp_user: "voting@yourdomain.com"
          smtp_password: ${{ secrets.SMTP_PASSWORD }}
          smtp_endpoint: "smtp.yourdomain.com"
          smtp_port: 465
```

## Input Variables

| Name | Description | Required | Default |
| ---- | ----------- | -------- | ------- |
| `notify_enabled` | boolean variable to enable notifications | yes | false |
| `notify_upvotes` | number of issues to notify on | yes if `notify_enabled` set to `true`, otherwise no | 10 |
| `notify_address` | email address to send notification to | yes if `notify_enabled` set to `true`, otherwise no | N/A |
| `notify_item_name` | Type of issue eg. suggestion, recommendation, feature request, prize etc. (used in notifation and summary table) |yes  if `notify_enabled` set to `true`, otherwise no | N/A |
| `notify_email_logo` | URL to logo to be used in email notification header | yes if `notify_enabled` set to `true`, otherwise no | N/A |
| `smtp_user` | email address of the SMTP user to send the email FROM | yes if `notify_enabled` set to `true`, otherwise no | N/A |
| `smtp_password` | SMTP password of the SMTP_USER | yes if `notify_enabled` set to `true`, otherwise no | N/A |
| `smtp_endpoint` | SMTP server endpoint | yes if `notify_enabled` set to `true`, otherwise no | N/A |
| `smtp_port` | SMTP port number | yes if `notify_enabled` set to `true`, otherwise no | N/A |